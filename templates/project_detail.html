{% extends 'base.html' %}

{% load static %}

{% block content %}
<div class="container my-5" style="background-image: url('{% static 'image/background.jpg' %}'); background-size: cover; background-position: center; padding: 30px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">

    <article class="project">    
        <section class="project-name pt-5">
            <h2 class="text-center text-primary" style="font-family: 'Arial', sans-serif; font-size: 36px; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);">{{ project.name }}</h2>
        </section>

        <h2 class="card-header text-center py-4" style="font-family: 'Arial', sans-serif; font-size: 28px; font-weight: bold; background-color:rgb(37, 88, 138); padding: 10px;  border-radius: 5px;">
          Project Detail
        </h2>
        
        <!-- Row for Image on Left and Project Details Cards on Right -->
        <div class="row mt-4 d-flex" style="display: flex; align-items: stretch;">
            <!-- Project Image (Left Side) -->
            <div class="col-md-4 mb-4 d-flex">
                <div class="card shadow-sm border-light w-100" style="height: 465px; display: flex; flex-direction: column;"> <!-- Adjust the height of the image card here -->
                    <div class="card-body p-4 d-flex justify-content-center align-items-center" style="height: 100%; padding-bottom: 10px;">
                        <!-- Display Image if the project has an image -->
                        {% if project.image %}
                            <img src="{{ project.image.url }}" alt="{{ project.name }} Image" class="img-fluid rounded" style="object-fit: cover; width: 100%; height: 100%;">
                        {% else %}
                            <p>No image available for this project.</p>
                        {% endif %}
                    </div>
                    
                </div>
            </div>

            <!-- Project Details (Right Side) -->
            <div class="col-md-8 d-flex">
                <div class="w-100" style="display: flex; flex-direction: column; height: 100%;"> <!-- Ensure it fills the available height -->
                    <!-- Row for Short Description and Description -->
                    <div class="row mt-4 w-100" style="flex: 1;">
                        <div class="col-md-6 mb-4">
                            <div class="card shadow-sm border-light h-100">
                                <div class="card-body">
                                    <h4 class="card-title text-secondary" style="font-family: 'Arial', sans-serif; font-size: 22px;"><b>Short Description:</b></h4>
                                    <p class="card-text lead" style="line-height: 1.6; color: #333;">{{ project.short_description|linebreaksbr }}</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6 mb-4">
                            <div class="card shadow-sm border-light h-100">
                                <div class="card-body">
                                    <h4 class="card-title text-secondary" style="font-family: 'Arial', sans-serif; font-size: 22px;"><b>Description:</b></h4>
                                    <p class="card-text" style="line-height: 1.6; color: #333;">{{ project.description|linebreaksbr }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Row for Project Details (Created On, End Date, Type, Developers) -->
                    <div class="row mt-4" style="flex: 1;">
                        <div class="col-md-6 mb-4">
                            <div class="card shadow-sm border-light h-100">
                                <div class="card-body">
                                    <h4 class="card-title text-secondary" style="font-family: 'Arial', sans-serif; font-size: 22px;"><b>Project Dates:</b></h4>
                                    <div style="font-size: 18px; font-weight: bold;">Created on: <span style="font-weight: normal; color: #555;">{{ project.created_date|date:"F j, Y" }}</span></div>
                                    <div style="font-size: 18px; font-weight: bold;">End date: <span style="font-weight: normal; color: #555;">{{ project.end_date|date:"F j, Y" }}</span></div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6 mb-4">
                            <div class="card shadow-sm border-light h-100">
                                <div class="card-body">
                                    <h4 class="card-title text-secondary" style="font-family: 'Arial', sans-serif; font-size: 22px;"><b>Project Information:</b></h4>
                                    <div style="font-size: 18px; font-weight: bold;">Type: <span style="font-weight: normal; color: #555;">{{ project.type }}</span></div>
                                    <div style="font-size: 18px; font-weight: bold;">Developers:</div>
                                    <div>
                                        {% for developer in project.developers.all %}
                                            <span style="color: #007bff;">{{ developer.name }}</span>{% if not forloop.last %}, {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </article>

    {% comment %} <div class="back-link mt-4 text-center">
        <a href="{% url 'project_list' %}" class="btn btn-primary btn-lg" style="border-radius: 50px; padding: 10px 30px; box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15);">Back to Projects</a>
    </div> {% endcomment %}
</div>



{% comment %} logbook form {% endcomment %}
{% for entry in project.log_entries.all %}
  <div class="card mb-4 shadow-sm rounded">
    <div class="card-body">

      <!-- Centered date and name -->
      <p class="text-muted text-center mb-3">
        {{ entry.timestamp|date:"F j, Y, g:i a" }}
        {% if entry.created_by %}
          - <span class="text-dark">by {{ entry.created_by.display_name }}</span>
        {% endif %}
      </p>

      <div class="row justify-content-center">
        <div class="col-md-5 mb-3">
          <div class="p-2 border rounded bg-light text-center">
            <strong>Tasks Done:</strong>
            <p class="small mb-0">{{ entry.tasks_done }}</p>
          </div>
        </div>
        <div class="col-md-5 mb-3">
          <div class="p-2 border rounded bg-light text-center">
            <strong>Remaining Tasks:</strong>
            <p class="small mb-0">{{ entry.tasks_remaining }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
{% empty %}
  <p class="text-center text-muted">No log entries yet.</p>
{% endfor %}


<h4 class="mt-5 text-center">Add Log Entry</h4>
<form method="post" class="p-4 shadow-sm rounded bg-light">
  {% csrf_token %}

  <div class="row justify-content-center">
    <!-- Tasks Done -->
    <div class="col-md-5 mb-3">
      <label for="id_tasks_done" class="form-label"><strong>Tasks Done:</strong></label>
      <input type="text" name="tasks_done" id="id_tasks_done" class="form-control" 
             style="height: 100px; width: 100%; border-radius: 6px;">
    </div>

    <!-- Remaining Tasks -->
    <div class="col-md-5 mb-3">
      <label for="id_tasks_remaining" class="form-label"><strong>Remaining Tasks:</strong></label>
      <input type="text" name="tasks_remaining" id="id_tasks_remaining" class="form-control" 
             style="height: 100px; width: 100%; border-radius: 6px;">
    </div>
  </div>

 <div class="d-flex justify-content-center gap-3 mt-4">
  <button type="submit" class="btn btn-success btn-lg" style="border-radius: 50px; padding: 10px 30px; box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15); font-size: 16px; font-weight: bold; text-align: center;">
    Submit Entry
  </button>

  <a href="{% url 'project_list' %}" class="btn btn-primary btn-lg" style="border-radius: 50px; padding: 10px 30px; box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15); font-size: 16px; font-weight: bold; text-align: center;">
    Back to Projects
  </a>
</div>

</form>


{% endblock %}
